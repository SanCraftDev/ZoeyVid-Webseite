<meta charset=utf-8>
<p align="center">
	<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/64fb7ed5ef9e175687573940e302297deb9600b1e28d43c58a2d4c55e4e5168d/68747470733a2f2f6e67696e7870726f78796d616e616765722e636f6d2f6769746875622e706e67"><img src="https://camo.githubusercontent.com/64fb7ed5ef9e175687573940e302297deb9600b1e28d43c58a2d4c55e4e5168d/68747470733a2f2f6e67696e7870726f78796d616e616765722e636f6d2f6769746875622e706e67" data-canonical-src="https://nginxproxymanager.com/github.png" style="max-width: 100%;"></a>
	<br><br>
	<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/f53e52d5839f977955cefcf9f5e8dd682d3d011c4862a95f048aa61f738a4a10/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f76657273696f6e2d322e31302e322b2d677265656e2e7376673f7374796c653d666f722d7468652d6261646765"><img src="https://camo.githubusercontent.com/f53e52d5839f977955cefcf9f5e8dd682d3d011c4862a95f048aa61f738a4a10/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f76657273696f6e2d322e31302e322b2d677265656e2e7376673f7374796c653d666f722d7468652d6261646765" data-canonical-src="https://img.shields.io/badge/version-2.10.2+-green.svg?style=for-the-badge" style="max-width: 100%;"></a>
	<a href="https://hub.docker.com/r/zoeyvid/nginx-proxy-manager" rel="nofollow">
		<img src="https://camo.githubusercontent.com/7545e5894009317cd246f63ad7942a175ce4f79945c4b37585429401b26c8b27/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f73746172732f7a6f65797669642f6e67696e782d70726f78792d6d616e616765722e7376673f7374796c653d666f722d7468652d6261646765" data-canonical-src="https://img.shields.io/docker/stars/zoeyvid/nginx-proxy-manager.svg?style=for-the-badge" style="max-width: 100%;">
	</a>
	<a href="https://hub.docker.com/r/zoeyvid/nginx-proxy-manager" rel="nofollow">
		<img src="https://camo.githubusercontent.com/d478b14a415950e1a11fa2c34791c2f9d6fe703384d21e2b1fbe85f66bd8653e/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f70756c6c732f7a6f65797669642f6e67696e782d70726f78792d6d616e616765722e7376673f7374796c653d666f722d7468652d6261646765" data-canonical-src="https://img.shields.io/docker/pulls/zoeyvid/nginx-proxy-manager.svg?style=for-the-badge" style="max-width: 100%;">
	</a>
</p>
<p>This project comes as a pre-built docker image that enables you to easily forward to your websites
running at home or otherwise, including free TLS, without having to know too much about Nginx or Letsencrypt.</p>
<ul>
<li><a href="#quick-setup">Quick Setup</a></li>
<li><a href="https://nginxproxymanager.com/screenshots" rel="nofollow">Screenshots</a></li>
</ul>
<h2><a id="user-content-project-goal" class="anchor" aria-hidden="true" href="#project-goal"><span aria-hidden="true" class="octicon octicon-link"></span></a>Project Goal</h2>
<p>I created this project to fill a personal need to provide users with a easy way to accomplish reverse
proxying hosts with TLS termination and it had to be so easy that a monkey could do it. This goal hasn't changed.
While there might be advanced options they are optional and the project should be as simple as possible
so that the barrier for entry here is low.</p>
<h3><a id="user-content-sponsor-the-original-creator-not-us" class="anchor" aria-hidden="true" href="#sponsor-the-original-creator-not-us"><span aria-hidden="true" class="octicon octicon-link"></span></a>Sponsor the original creator (not us):</h3>
<p><a href="https://www.buymeacoffee.com/jc21" rel="nofollow"><img src="https://camo.githubusercontent.com/674bfc1dd775fa1c51eebaf73df1c45fbb6ad76357508b1dc227d7010ba23a68/687474703a2f2f7075626c69632e6a6332312e636f6d2f6769746875622f62792d6d652d612d636f666665652e706e67" alt="Buy Me A Coffee" data-canonical-src="http://public.jc21.com/github/by-me-a-coffee.png" style="max-width: 100%;"></a></p>
<h2><a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h2>
<ul>
<li>Beautiful and Secure Admin Interface based on <a href="https://tabler.github.io" rel="nofollow">Tabler</a>
</li>
<li>Easily create forwarding domains, redirections, streams and 404 hosts without knowing anything about Nginx</li>
<li>Free trusted TLS certificates using Certbot (Let's Encrypt) or provide your own custom TLS certificates</li>
<li>Access Lists and basic HTTP Authentication for your hosts</li>
<li>Advanced Nginx configuration available for super users</li>
<li>User management, permissions and audit log</li>
</ul>
<h1><a id="user-content-new-features" class="anchor" aria-hidden="true" href="#new-features"><span aria-hidden="true" class="octicon octicon-link"></span></a>New Features</h1>
<ul>
<li>HTTP/3 (QUIC) Support</li>
<li>Fix Proxy Hosts, if origin only accepts TLSv1.3</li>
<li>Only use TLSv1.2 and TLSv1.3</li>
<li>Uses OCSP Stapling
<ul>
<li>Needs manual migration if you use custom certificates, just upload the CA/Intermediate Certificate (file name: <code>chain.pem</code>) in the <code>/opt/npm/tls/custom/npm-[certificate-id]</code> folder</li>
</ul>
</li>
<li>fixed dnspod plugin
<ul>
<li>Needs manual migration, please delete all dnspod certs and recreate them OR you manually change the credentialsfile (see <a href="https://github.com/ZoeyVid/nginx-proxy-manager/blob/develop/global/certbot-dns-plugins.js">here</a> for the template)</li>
</ul>
</li>
<li>Smaller then the original</li>
<li>Runs the admin interface on port 81 with https</li>
<li>Default page runs also with https</li>
<li>Uses <a href="https://gitHub.com/Naereen/Nginx-Fancyindex-Theme">fancyindex</a> if you use the npm directly as webserver</li>
<li>Expose INTERNAL backend api only to localhost</li>
<li>Easy security headers, see <a href="https://github.com/GetPageSpeed/ngx_security_headers">here</a>
</li>
<li>Access Log disabled</li>
<li>Error Log written to console</li>
<li>PHP optinal, you can add php extensions, see aviable packages <a href="https://pkgs.alpinelinux.org/packages?branch=v3.17&amp;repo=community&amp;arch=x86_64&amp;name=php81-*" rel="nofollow">here</a> and <a href="https://pkgs.alpinelinux.org/packages?branch=v3.17&amp;repo=community&amp;arch=x86_64&amp;name=php82-*" rel="nofollow">here</a>
</li>
<li>allows different acme servers</li>
<li>up to 99 domains per cert allowed</li>
<li>Brotli can be enabled</li>
<li>HTTP/2 always enabled</li>
<li>HTTP/2 upload fixed</li>
<li>Infinite upload size allowed</li>
<li>Auto database vacuum (only sqlite) (FULLCLEAN=true)</li>
<li>Auto certbot old certs clean (FULLCLEAN=true)</li>
<li>Passwort reset (only sqlite) (<code>docker exec -it nginx-proxy-manager password-reset.js USER_EMAIL PASSWORD</code>)</li>
<li>TLS supported for MariaDB/MySQL, please set the <code>DB_MYSQL_TLS</code> env to true. If you use self signed certificates you can upload them for example to <code>/data/etc/npm/ca.crt</code> and set the <code>DB_MYSQL_CA</code> to <code>/data/etc/npm/ca.crt</code> (not tested)</li>
<li>PUID/GGID support in network mode host (please add <code>net.ipv4.ip_unprivileged_port_start=0</code> at the end of <code>/etc/sysctl.conf</code>)</li>
<li>Option to set IP bindings (multiple instances) in network mode host</li>
<li>Option to change backend port</li>
<li>See composefile for all options</li>
</ul>
<h2><a id="user-content-soon" class="anchor" aria-hidden="true" href="#soon"><span aria-hidden="true" class="octicon octicon-link"></span></a>Soon</h2>
<ul>
<li>dark mode</li>
<li>more</li>
</ul>
<h2><a id="user-content-migration" class="anchor" aria-hidden="true" href="#migration"><span aria-hidden="true" class="octicon octicon-link"></span></a>migration</h2>
<ul>
<li>
<strong>NOTE: migrating back to the original is not possible</strong>, so make first a <strong>backup</strong> before migration, so you can use the backup to switch back</li>
<li>if you use custom certificates, you need to upload the CA/Intermediate Certificate (file name: <code>chain.pem</code>) in the <code>/opt/npm/tls/custom/npm-[certificate-id]</code> folder</li>
<li>some buttons have changed, check if they are still correct</li>
<li>please delete all dnspod certs and recreate them OR you manually change the credentialsfile (see <a href="https://github.com/ZoeyVid/nginx-proxy-manager/blob/develop/global/certbot-dns-plugins.js">here</a> for the template)</li>
</ul>
<h1><a id="user-content-use-as-webserver" class="anchor" aria-hidden="true" href="#use-as-webserver"><span aria-hidden="true" class="octicon octicon-link"></span></a>Use as webserver</h1>
<ol>
<li>Create a new Proxy Host</li>
<li>Set <code>Scheme</code> to <code>https</code>, <code>Forward Hostname / IP</code> to <code>0.0.0.0</code>, <code>Forward Port</code> to <code>1</code> and enable <code>Websockets Support</code> (you can also use other values, since these get fully ignored)</li>
<li>Maybe set an Access List</li>
<li>Make your TLS Settings</li>
<li>
</li></ol>
<p>a) Custom Nginx Configuration (advanced tab), which looks the following for file server:</p>
<ul>
<li>Note: the slash at the end of the file path is important</li>
</ul>
<pre><code>location / {
alias /var/www/&lt;your-html-site-folder-name&gt;/;
}
</code></pre>
<p>b) Custom Nginx Configuration (advanced tab), which looks the following for file server and <strong>php</strong>:</p>
<ul>
<li>Note: the slash at the end of the file path is important</li>
<li>Note: first enable <code>PHP81</code> and/or <code>PHP82</code> inside your compose file</li>
<li>Note: you can replace <code>fastcgi_pass php82;</code> with <code>fastcgi_pass</code> <code>php81</code>/<code>php82</code> <code>;</code>
</li>
<li>Note: to add more php extension use the packes from <a href="https://pkgs.alpinelinux.org/packages?branch=v3.17&amp;repo=community&amp;arch=x86_64&amp;name=php8*-*" rel="nofollow">here</a> and add them using the <code>PHP_APKS</code> env (see compose file)</li>
</ul>
<pre><code>location / {
alias /var/www/&lt;your-php-site-folder-name&gt;/;

location ~ [^/]\.php(/|$) {
fastcgi_pass php82;
fastcgi_split_path_info ^(.+?\.php)(/.*)$;
if (!-f $document_root$fastcgi_script_name) {return 404;}
}}
</code></pre>
<h1><a id="user-content-custom-acme-server" class="anchor" aria-hidden="true" href="#custom-acme-server"><span aria-hidden="true" class="octicon octicon-link"></span></a>custom acme server</h1>
<ol>
<li>Open this file: <code>nano</code> <code>/opt/npm/ssl/certbot/config.ini</code>
</li>
<li>uncomment the server line and change it to your acme server</li>
<li>maybe set eab keys</li>
<li>create your cert using the npm web ui</li>
</ol>
<h1><a id="user-content-quick-setup" class="anchor" aria-hidden="true" href="#quick-setup"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick Setup</h1>
<ol>
<li>Install Docker and Docker Compose (or portainer)</li>
</ol>
<ul>
<li><a href="https://docs.docker.com/engine" rel="nofollow">Docker Install documentation</a></li>
<li><a href="https://docs.docker.com/compose/install/linux" rel="nofollow">Docker Compose Install documentation</a></li>
</ul>
<ol start="2">
<li>Create a compose.yaml file similar to this (or use it as a portainer stack):</li>
</ol>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">version</span>: <span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span>
<span class="pl-ent">services</span>:
    <span class="pl-ent">nginx-proxy-manager</span>:
        <span class="pl-ent">container_name</span>: <span class="pl-s">nginx-proxy-manager</span>
        <span class="pl-ent">image</span>: <span class="pl-s">zoeyvid/nginx-proxy-manager</span>
        <span class="pl-ent">restart</span>: <span class="pl-s">always</span>
        <span class="pl-ent">network_mode</span>: <span class="pl-s">host</span>
        <span class="pl-ent">volumes</span>:
        - <span class="pl-s"><span class="pl-pds">"</span>/opt/npm:/data<span class="pl-pds">"</span></span>
<span class="pl-c"><span class="pl-c">#</span>        - "/var/www:/var/www" # optional, if you want to use it as webserver for html/php</span>
<span class="pl-c"><span class="pl-c">#</span>        - "/opt/npm-letsencrypt:/etc/letsencrypt" # Only needed for first time migration from original nginx-proxy-manager to this fork</span>
        <span class="pl-ent">environment</span>:
        - <span class="pl-s"><span class="pl-pds">"</span>TZ=Europe/Berlin<span class="pl-pds">"</span></span> <span class="pl-c"><span class="pl-c">#</span> set timezone, default UTC</span>
<span class="pl-c"><span class="pl-c">#</span>        - "PUID=1000" # set group id, default 0 (root)</span>
<span class="pl-c"><span class="pl-c">#</span>        - "PGID=1000" # set user id, default 0 (root)</span>
<span class="pl-c"><span class="pl-c">#</span>        - "NIBEP=48693" # internal port, always bound to 127.0.0.1, default 48693, you need to change it, if you want to run multiple npm instances in network mode host</span>
<span class="pl-c"><span class="pl-c">#</span>        - "NPM_PORT=81" # Port the NPM backend should be bound to, default 81, you need to change it, if you want to run multiple npm instances in network mode host</span>
<span class="pl-c"><span class="pl-c">#</span>        - "IPV4_BINDING=127.0.0.1" # IPv4 address to bind, defaults to all</span>
<span class="pl-c"><span class="pl-c">#</span>        - "NPM_IPV4_BINDING=127.0.0.1" # IPv4 address to bind for the NPM backend, defaults to all</span>
<span class="pl-c"><span class="pl-c">#</span>        - "IPV6_BINDING=[::1]" # IPv6 address to bind, defaults to all</span>
<span class="pl-c"><span class="pl-c">#</span>        - "NPM_IPV6_BINDING=[::1]" # IPv6 address to bind for the NPM backend, defaults to all</span>
<span class="pl-c"><span class="pl-c">#</span>        - "DISABLE_IPV6=true" # disable IPv6, incompatible with IPV6_BINDING, default false</span>
<span class="pl-c"><span class="pl-c">#</span>        - "NPM_DISABLE_IPV6=true" # disable IPv6 for the NPM backend, incompatible with NPM_IPV6_BINDING, default false</span>
<span class="pl-c"><span class="pl-c">#</span>        - "NPM_LISTEN_LOCALHOST=true" # Bind the NPM Dashboard on Port 81 only to localhost, incompatible with NPM_IPV4_BINDING/NPM_IPV6_BINDING/NPM_DISABLE_IPV6, default false</span>
<span class="pl-c"><span class="pl-c">#</span>        - "NPM_CERT_ID=1" # ID of cert, which should be used instead of dummycerts, default unset/dummycerts</span>
<span class="pl-c"><span class="pl-c">#</span>        - "DISABLE_HTTP=true" # disables nginx to listen on port 80, default false</span>
<span class="pl-c"><span class="pl-c">#</span>        - "NGINX_LOG_NOT_FOUND=true" # Allow logging of 404 errors, default false</span>
<span class="pl-c"><span class="pl-c">#</span>        - "CLEAN=false" # Clean folders, default true</span>
<span class="pl-c"><span class="pl-c">#</span>        - "FULLCLEAN=true" # Clean unused config folders, default false</span>
<span class="pl-c"><span class="pl-c">#</span>        - "PHP81=true" # Activate PHP81, default false</span>
<span class="pl-c"><span class="pl-c">#</span>        - "PHP81_APKS=php81-curl php-81-curl" # Add php extensions, see aviable packages here: https://pkgs.alpinelinux.org/packages?branch=v3.17&amp;repo=community&amp;arch=x86_64&amp;name=php81-*, default none</span>
<span class="pl-c"><span class="pl-c">#</span>        - "PHP82=true" # Activate PHP82, default false</span>
<span class="pl-c"><span class="pl-c">#</span>        - "PHP82_APKS=php82-curl php-82-curl" # Add php extensions, see aviable packages here: https://pkgs.alpinelinux.org/packages?branch=v3.17&amp;repo=community&amp;arch=x86_64&amp;name=php82-*, default none</span></pre></div>
<ol start="3">
<li>Bring up your stack by running (or deploy your portainer stack)</li>
</ol>
<div class="highlight highlight-source-shell"><pre>docker compose up -d</pre></div>
<ol start="4">
<li>Log in to the Admin UI</li>
</ol>
<p>When your docker container is running, connect to it on port <code>81</code> for the admin interface.
Sometimes this can take a little bit because of the entropy of keys.
You may need to open port 81 in your firewall.
You may need to use another IP-Address.</p>
<p><a href="https://127.0.0.1:81" rel="nofollow">https://127.0.0.1:81</a></p>
<p>Default Admin User:</p>
<pre><code>Email:    admin@example.com
Password: iArhP1j7p1P6TA92FA2FMbbUGYqwcYzxC4AVEe12Wbi94FY9gNN62aKyF1shrvG4NycjjX9KfmDQiwkLZH1ZDR9xMjiG2QmoHXi
</code></pre>
<p>Immediately after logging in with this default user you will be asked to modify your details and change your password.</p>
<h2><a id="user-content-contributors-original-npm" class="anchor" aria-hidden="true" href="#contributors-original-npm"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributors (original NPM)</h2>
<p>Special thanks to <a href="https://github.com/NginxProxyManager/nginx-proxy-manager/graphs/contributors">all of our contributors</a>.</p>
<h1><a id="user-content-please-report-bugs-first-to-this-fork-before-reporting-them-to-the-original-repository" class="anchor" aria-hidden="true" href="#please-report-bugs-first-to-this-fork-before-reporting-them-to-the-original-repository"><span aria-hidden="true" class="octicon octicon-link"></span></a>Please report Bugs first to this fork before reporting them to the original Repository</h1>
<h2><a id="user-content-getting-support" class="anchor" aria-hidden="true" href="#getting-support"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Support</h2>
<ol>
<li><a href="https://github.com/ZoeyVid/nginx-proxy-manager/issues">Found a bug?</a></li>
<li><a href="https://github.com/ZoeyVid/nginx-proxy-manager/discussions">Discussions</a></li>
</ol>

